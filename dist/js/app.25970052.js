(function(t){function e(e){for(var n,a,s=e[0],c=e[1],u=e[2],l=0,h=[];l<s.length;l++)a=s[l],i[a]&&h.push(i[a][0]),i[a]=0;for(n in c)Object.prototype.hasOwnProperty.call(c,n)&&(t[n]=c[n]);f&&f(e);while(h.length)h.shift()();return r.push.apply(r,u||[]),o()}function o(){for(var t,e=0;e<r.length;e++){for(var o=r[e],n=!0,a=1;a<o.length;a++){var c=o[a];0!==i[c]&&(n=!1)}n&&(r.splice(e--,1),t=s(s.s=o[0]))}return t}var n={},i={app:0},r=[];function a(t){return s.p+"js/"+({about:"about"}[t]||t)+"."+{about:"8b907bfe"}[t]+".js"}function s(e){if(n[e])return n[e].exports;var o=n[e]={i:e,l:!1,exports:{}};return t[e].call(o.exports,o,o.exports,s),o.l=!0,o.exports}s.e=function(t){var e=[],o=i[t];if(0!==o)if(o)e.push(o[2]);else{var n=new Promise(function(e,n){o=i[t]=[e,n]});e.push(o[2]=n);var r,c=document.getElementsByTagName("head")[0],u=document.createElement("script");u.charset="utf-8",u.timeout=120,s.nc&&u.setAttribute("nonce",s.nc),u.src=a(t),r=function(e){u.onerror=u.onload=null,clearTimeout(l);var o=i[t];if(0!==o){if(o){var n=e&&("load"===e.type?"missing":e.type),r=e&&e.target&&e.target.src,a=new Error("Loading chunk "+t+" failed.\n("+n+": "+r+")");a.type=n,a.request=r,o[1](a)}i[t]=void 0}};var l=setTimeout(function(){r({type:"timeout",target:u})},12e4);u.onerror=u.onload=r,c.appendChild(u)}return Promise.all(e)},s.m=t,s.c=n,s.d=function(t,e,o){s.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:o})},s.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},s.t=function(t,e){if(1&e&&(t=s(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var o=Object.create(null);if(s.r(o),Object.defineProperty(o,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var n in t)s.d(o,n,function(e){return t[e]}.bind(null,n));return o},s.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return s.d(e,"a",e),e},s.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},s.p="/",s.oe=function(t){throw console.error(t),t};var c=window["webpackJsonp"]=window["webpackJsonp"]||[],u=c.push.bind(c);c.push=e,c=c.slice();for(var l=0;l<c.length;l++)e(c[l]);var f=u;r.push([0,"chunk-vendors"]),o()})({0:function(t,e,o){t.exports=o("56d7")},"56d7":function(t,e,o){"use strict";o.r(e);o("cadf"),o("551c"),o("097d");var n=o("2b0e"),i=function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("div",{attrs:{id:"app"}},[o("router-view")],1)},r=[],a=(o("7faf"),o("2877")),s={},c=Object(a["a"])(s,i,r,!1,null,null,null);c.options.__file="App.vue";var u=c.exports,l=o("8c4f"),f=function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("div",{staticClass:"home"},[t._m(0),o("MonitorCamera",{attrs:{config:t.monitorConfig},on:{rotate:t.onCameraRotated,cast:t.onRayCasted,obj:t.gotObject}}),o("MonitorCamera",{attrs:{config:t.observerConfig,"camera-rotaion":t.syncRotation,"ray-casting":t.castRay}}),o("div",{staticStyle:{"text-align":"left"}},[o("p",[o("span",[t._v("Angle from center of camera view: "+t._s(Math.round(100*t.objPosition.degree)/100))]),o("span",[t._v(", Height of target(fixed by object):"+t._s(Math.round(100*(6+t.objPosition.z))/100))]),o("span",[t._v(" ----\x3e ")]),o("span",[t._v("Coordinate: ("+t._s(Math.round(100*t.objPosition.x)/100)+", "+t._s(Math.round(100*t.objPosition.y)/100)+")")])])]),t._m(1)],1)},h=[function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("div",{staticStyle:{"text-align":"left"}},[o("p",[o("span",[t._v("This is demo about how to measure the angle and coordinate of specific point.The point is on a surface of an object and casted from a camera view.")])]),o("p",[o("span",[t._v("Click on the green/blue/orange block to see calc result, or drag to rotate the camera.")])])])},function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("div",{staticStyle:{position:"absolute",left:"0px",bottom:"0px"}},[o("div",[o("a",{attrs:{href:"mailto:xvkai2010@gmail.com"}},[t._v("xvkai2010@gmail.com")])]),o("div",[o("a",{attrs:{href:"mailto:xukai@ai2-jp.com"}},[t._v("xukai@ai2-jp.com")])])])}],p=function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("div",{staticClass:"stage"},[o("div",{ref:"stage",on:{mousedown:t.onMouseDown,mousemove:t.onMouseMove,mouseup:t.onMouseUp}})])},d=[],m=o("be94"),g=o("4478"),v=o("2909"),y=(o("ac6a"),o("5a89")),b={name:"MonitorCamera",props:{config:{type:Object,default:function(){return null}},cameraRotaion:{type:Object,default:function(){return null}},rayCasting:{type:Object,default:function(){return null}}},data:function(){var t,e,o,n=this,i=new y["m"],r=new y["p"];r.setSize(this.config.size.w,this.config.size.h),this.config.cameras.forEach(function(r,a){var s=Object(g["a"])(y["i"],Object(v["a"])(r.option));if(r.helper){var c=new y["b"](s);i.add(c),o=c}r.lookAt&&s.lookAt(Object(g["a"])(y["o"],Object(v["a"])(r.lookAt))),r.position&&(s.position.x=r.position.x,s.position.y=r.position.y,s.position.z=r.position.z),r.rotation&&(s.rotation.x=r.rotation.x,s.rotation.y=r.rotation.y,s.rotation.z=r.rotation.z),a===n.config.cameraUseIndex?t=s:e=s,s.updateProjectionMatrix()}),this.config.planes.forEach(function(t){var e=new y["j"](Object(g["a"])(y["o"],Object(v["a"])(t.geo)),t.distance);i.add(e);var o=new y["k"](e,10,16776960);i.add(o)});var a=this.config.objects.map(function(t){var e=n.createObject(t.geo,t.color,t.position);return i.add(e),e}),s=new y["d"](16777215,16777215,1);return s.color.setHSL(1,1,1),s.groundColor.setHSL(.095,1,.75),s.position.set(0,5,0),i.add(s),{scene:i,renderer:r,camera:t,light:s,rotate:Math.PI/90*.2,rotating:!1,hasMoueMoved:!1,originRotate:null,originXY:null,controlCamera:e,controlCameraHelper:o,raycaster:new y["l"],mouse:new y["n"],intersectPt:null,rayLine:null,objects:a}},created:function(){this.scene.add(this.camera)},mounted:function(){this.$refs.stage.appendChild(this.renderer.domElement),this.animate()},watch:{cameraRotaion:function(t){t&&(this.controlCamera.rotation.x=this.cameraRotaion.x,this.controlCamera.rotation.y=this.cameraRotaion.y,this.controlCamera.updateMatrixWorld(),this.controlCameraHelper.update(),this.controlCameraHelper.visible=!0)},rayCasting:function(t){this.drawRaycastLineIndirection(t)}},methods:{createObject:function(t,e,o){var n=Object(g["a"])(y["a"],Object(v["a"])(t)),i=new y["h"]({color:e}),r=new y["g"](n,i);return r.position.x=o.x,r.position.y=o.y,r.position.z=o.z,r},animate:function(){requestAnimationFrame(this.animate),this.renderer.render(this.scene,this.camera)},onMouseDown:function(t){this.hasMoueMoved=!1,this.rotating=0===t.button,this.rotating&&(this.originRotate={x:this.camera.rotation.x,y:this.camera.rotation.y,z:this.camera.rotation.z},this.originXY={x:t.offsetX,y:t.offsetY})},onMouseUp:function(t){if(this.rotating=!1,(!this.hasMoueMoved||t.offsetX===this.originXY.x&&t.offsetY===this.originXY.y)&&this.config.rayCasting){this.mouse.x=t.offsetX/this.config.size.w*2-1,this.mouse.y=-t.offsetY/this.config.size.h*2+1,this.raycaster.setFromCamera(this.mouse,this.camera);var e=this.raycaster.intersectObjects(this.objects);if(this.objects.forEach(function(t){t.prevColor?t.material.color.set(t.prevColor):t.prevColor=t.material.color.getHex()}),e&&e.length>0){e[0].object.material.color.set(16711680);var o=e[0].point,n={x:o.x,y:o.y,z:o.z},i=o.normalize();this.$emit("cast",i),this.drawRaycastLineIndirection(i);var r=this.camera.getWorldDirection().angleTo(i),a=r/(Math.PI/90);this.$emit("obj",Object(m["a"])({},n,{mouseX:t.offsetX,mouseY:t.offsetY,degree:a}))}}},onMouseMove:function(t){this.rotating&&(this.hasMoueMoved=!0,t.preventDefault(),this.config.yRotate?this.camera.rotation.y=this.originRotate.y-(t.offsetX-this.originXY.x)*this.rotate:(this.camera.rotation.y=this.originRotate.y-(t.offsetX-this.originXY.x)*this.rotate,this.camera.rotation.x=this.originRotate.x-(t.offsetY-this.originXY.y)*this.rotate),this.camera.updateMatrix(),this.config.emitControl&&this.$emit("rotate",{x:this.camera.rotation.x,y:this.camera.rotation.y}))},drawRaycastLineIndirection:function(t){this.drawRaycastLine({ray:{origin:{x:0,y:0,z:0},direction:t}})},drawRaycastLine:function(t){var e=new y["f"]({color:16776960,linewidth:1}),o=new y["c"],n=new y["o"](t.ray.origin.x,t.ray.origin.y,t.ray.origin.z),i=new y["o"](t.ray.direction.x,t.ray.direction.y,t.ray.direction.z);i.multiplyScalar(5e3);var r=new y["o"];r.lerpVectors(n,i,.5),o.vertices.push(n),o.vertices.push(r),o.vertices.push(i),this.rayLine&&this.scene.remove(this.rayLine),this.rayLine=new y["e"](o,e),this.scene.add(this.rayLine)}},computed:{}},x=b,j=(o("6b07"),Object(a["a"])(x,p,d,!1,null,null,null));j.options.__file="MonitorCamera.vue";var w=j.exports,C={name:"Home",components:{MonitorCamera:w},data:function(){var t=[80,4/3,1,100],e={w:600,h:480},o={geo:[10,10,.1],color:15658734,position:{x:0,y:0,z:-6}},n=65280,i=[o],r=2,a=4.5;i.push(this.createObject(r,-2,2,a,n)),i.push(this.createObject(r,1,1.5,4,61695)),i.push(this.createObject(r,-.5,.5,3,15753312));var s={size:e,rayCasting:!0,cameraUseIndex:0,cameras:[{option:t}],planes:[],objects:i,emitControl:!0},c={yRotate:"z",size:e,cameraUseIndex:1,cameras:[{helper:!0,option:t,syncControl:!0},{option:[100,4/3,1,100],position:{x:5,y:1,z:-5},rotation:{x:Math.PI/2,y:Math.PI/2,z:0}}],planes:[],objects:i};return{monitorConfig:s,observerConfig:c,syncRotation:{x:0,y:0},castRay:{x:0,y:0,z:0},objPosition:{degree:0,x:0,y:0,z:0}}},methods:{onCameraRotated:function(t){this.syncRotation=t},onRayCasted:function(t){this.castRay=t},gotObject:function(t){this.objPosition=t},createObject:function(t,e,o,n,i){return{geo:[t,t,.01],color:i,position:{x:e,y:o,z:-n}}}}},M=C,_=Object(a["a"])(M,f,h,!1,null,null,null);_.options.__file="Home.vue";var O=_.exports;n["a"].use(l["a"]);var z=new l["a"]({routes:[{path:"/",name:"home",component:O},{path:"/about",name:"about",component:function(){return o.e("about").then(o.bind(null,"f820"))}}]}),R=o("2f62");n["a"].use(R["a"]);var P=new R["a"].Store({state:{},mutations:{},actions:{}}),k=o("9483");Object(k["a"])("".concat("/","service-worker.js"),{ready:function(){console.log("App is being served from cache by a service worker.\nFor more details, visit https://goo.gl/AFskqB")},cached:function(){console.log("Content has been cached for offline use.")},updated:function(){console.log("New content is available; please refresh.")},offline:function(){console.log("No internet connection found. App is running in offline mode.")},error:function(t){console.error("Error during service worker registration:",t)}}),n["a"].config.productionTip=!1,new n["a"]({router:z,store:P,render:function(t){return t(u)}}).$mount("#app")},"6b07":function(t,e,o){"use strict";var n=o("fc20"),i=o.n(n);i.a},"7faf":function(t,e,o){"use strict";var n=o("8fba"),i=o.n(n);i.a},"8fba":function(t,e,o){},fc20:function(t,e,o){}});
//# sourceMappingURL=app.25970052.js.map